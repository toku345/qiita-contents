---
title: Groonga新リリース自慢会 6.0.2 で教わったことまとめ
tags:
  - groonga
  - 全文検索
private: false
updated_at: '2023-08-09T11:47:41+09:00'
id: 34cff53fc1373886b4bd
organization_url_name: null
slide: false
---

去る 4 月 27 日に弊社 CrowdWorks で[Groonga 新リリース自慢会 6.0.2](https://groonga.doorkeeper.jp/events/44055)が開催されました :tada:

そこに飛び入り参加させていただいた際に、全文検索についていろいろとご教授いただきました！
そこでお礼の念を込めて、忘れないうちにまとめてみました！

全文検索初心者がまとめた記事なので間違い等があるかもしれません。
その際は ~~優しく~~ ご指摘頂けると幸いです :bow:

# 用語

## テーブル

Groonga では RDBMS のテーブルと同じようなもの

## カラム

Groonga では RDBMS のカラムと同じようなもの

## インデックス

Groonga では転置インデックスのこと

## 転置インデックス

[wikipedia](https://ja.wikipedia.org/wiki/%E8%BB%A2%E7%BD%AE%E3%82%A4%E3%83%B3%E3%83%87%E3%83%83%E3%82%AF%E3%82%B9)によると

> 転置インデックス（てんちインデックス、Inverted index）とは、全文検索を行う対象となる文書群から単語の位置情報を格納するための索引構造をいう。

とのこと。早く検索結果にたどり着くためのもの（だろう）。

# トークナイザー

テキストをトークナイズするモジュールのこと。

## トークナイズとは？

検索対象となる文章や、検索キーワードをある任意の塊（トークン）に分解・抽出すること。
(辞書に登録された)単語ごとに分解する方法や、任意の連続文字数毎に区切る方法がある。

このような文章が有った場合、
![image](https://qiita-image-store.s3.amazonaws.com/0/13998/af34eb97-ccc6-85f9-0c11-811be6ea2c1d.png)

分解する方法は以下の様な方法があります。

### ■ 単語毎に分ける方法

![image](https://qiita-image-store.s3.amazonaws.com/0/13998/b73576de-f6bc-c1a3-c649-f78f050fcf21.png)

### ■ 数文字毎に分ける方法（以下の場合２文字毎）

![image](https://qiita-image-store.s3.amazonaws.com/0/13998/0602892b-03ff-60fc-51d0-701feb57a3f6.png)

#### ○ バイグラム・トリグラム・n-gram ？

トークナイズする際に、特定の文字数毎に区切る方法のこと

バイグラム(bigram) → 2 文字ごとに区切る
トリグラム（trigram） → 鶏肉の重さ...ではなく、3 文字毎に区切る

n-gram → 任意の n 文字で区切る

### ★ 更なる深みへ...

[Groonga ドキュメント 7.8 トークナイザー](http://groonga.org/ja/docs/reference/tokenizers.html)
[Groonga ドキュメント 7.8.2 「トークナイズ」とはなにか](http://groonga.org/ja/docs/reference/tokenizers.html#what-is-tokenize)

# ノーマライザー

`クラウドワークス`と`ｸﾗｳﾄﾞﾜｰｸｽ`のような表記ゆれが発生する単語の場合、そのまま保存すると別のものとして扱われてしまいます。
それを防ぐための処理が**ノーマライズ**！
以下のように、特定の表記に変更します。

```
# 例
ｸﾗｳﾄﾞﾜｰｸｽ → クラウドワークス
ｸﾗｳﾄﾞワークス → クラウドワークス
クラウドワークス → クラウドワークス
```

### ★ 更なる深みへ...

[Groonga ドキュメント 7.7 ノーマライザー](http://groonga.org/ja/docs/reference/normalizers.html)

---

トークナイズしたインデックスを使ってどうやって検索するのか説明を書こうと思ったのですが、ちょっと壮大な記事になりそうだったのと、ちゃんと説明できる自身がなかったので今回は自粛しました...

もちょっと勉強して改めて記事にします 💪
